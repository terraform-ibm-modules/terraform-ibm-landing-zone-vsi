{
  "path": ".",
  "variables": {
    "add_ibm_cloud_internal_rules": {
      "name": "add_ibm_cloud_internal_rules",
      "type": "bool",
      "description": "Add IBM Cloud Internal rules to security group rules",
      "default": false,
      "source": [
        "module.security_group_rules"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 104
      }
    },
    "allow_ip_spoofing": {
      "name": "allow_ip_spoofing",
      "type": "bool",
      "description": "Allow IP spoofing on the primary network interface",
      "default": false,
      "pos": {
        "filename": "variables.tf",
        "line": 93
      }
    },
    "block_storage_volumes": {
      "name": "block_storage_volumes",
      "type": "list(\n    object({\n      name           = string\n      profile        = string\n      capacity       = optional(number)\n      iops           = optional(number)\n      encryption_key = optional(string)\n    })\n  )",
      "description": "List describing the block storage volumes that will be attached to each vsi",
      "default": [],
      "source": [
        "ibm_is_instance.vsi.volumes"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 180
      }
    },
    "boot_volume_encryption_key": {
      "name": "boot_volume_encryption_key",
      "type": "string",
      "description": "CRN of boot volume encryption key",
      "required": true,
      "pos": {
        "filename": "variables.tf",
        "line": 82
      }
    },
    "create_security_group": {
      "name": "create_security_group",
      "type": "bool",
      "description": "Create security group for VSI. If this is passed as false, the default will be used",
      "required": true,
      "pos": {
        "filename": "variables.tf",
        "line": 99
      }
    },
    "enable_floating_ip": {
      "name": "enable_floating_ip",
      "type": "bool",
      "description": "Create a floating IP for each virtual server created",
      "default": false,
      "source": [
        "ibm_is_floating_ip.vsi_fip.for_each"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 87
      }
    },
    "image_id": {
      "name": "image_id",
      "type": "string",
      "description": "Image ID used for VSI. Run 'ibmcloud is images' to find available images in a region",
      "required": true,
      "source": [
        "ibm_is_instance.vsi.image"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 57
      },
      "immutable": true,
      "computed": true
    },
    "load_balancers": {
      "name": "load_balancers",
      "type": "list(\n    object({\n      name              = string\n      type              = string\n      listener_port     = number\n      listener_protocol = string\n      connection_limit  = number\n      algorithm         = string\n      protocol          = string\n      health_delay      = number\n      health_retries    = number\n      health_timeout    = number\n      health_type       = string\n      pool_member_port  = string\n      security_group = optional(\n        object({\n          name = string\n          rules = list(\n            object({\n              name      = string\n              direction = string\n              remote    = string\n              tcp = optional(\n                object({\n                  port_max = number\n                  port_min = number\n                })\n              )\n              udp = optional(\n                object({\n                  port_max = number\n                  port_min = number\n                })\n              )\n              icmp = optional(\n                object({\n                  type = number\n                  code = number\n                })\n              )\n            })\n          )\n        })\n      )\n    })\n  )",
      "description": "Load balancers to add to VSI",
      "default": [],
      "pos": {
        "filename": "variables.tf",
        "line": 199
      }
    },
    "machine_type": {
      "name": "machine_type",
      "type": "string",
      "description": "VSI machine type. Run 'ibmcloud is instance-profiles' to get a list of regional profiles",
      "required": true,
      "source": [
        "ibm_is_instance.vsi.profile"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 67
      },
      "computed": true
    },
    "prefix": {
      "name": "prefix",
      "type": "string",
      "description": "The IBM Cloud platform API key needed to deploy IAM enabled resources",
      "required": true,
      "source": [
        "ibm_is_lb.lb.name",
        "ibm_is_lb_pool.pool.name"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 10
      },
      "min_length": 1,
      "max_length": 63,
      "matches": "^([a-z]|[a-z][-a-z0-9]*[a-z0-9])$"
    },
    "resource_group_id": {
      "name": "resource_group_id",
      "type": "string",
      "description": "id of resource group to create VPC",
      "required": true,
      "source": [
        "ibm_is_instance.vsi.resource_group",
        "ibm_is_lb.lb.resource_group",
        "module.security_group_rules.ibm_is_security_group.sg.resource_group"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 5
      },
      "cloud_data_type": "resource_group",
      "immutable": true,
      "computed": true
    },
    "secondary_allow_ip_spoofing": {
      "name": "secondary_allow_ip_spoofing",
      "type": "bool",
      "description": "Allow IP spoofing on additional network interfaces",
      "default": false,
      "pos": {
        "filename": "variables.tf",
        "line": 365
      }
    },
    "secondary_floating_ips": {
      "name": "secondary_floating_ips",
      "type": "list(string)",
      "description": "List of secondary interfaces to add floating ips",
      "default": [],
      "source": [
        "ibm_is_floating_ip.secondary_fip.for_each"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 354
      }
    },
    "secondary_security_groups": {
      "name": "secondary_security_groups",
      "type": "list(\n    object({\n      security_group_id = string\n      interface_name    = string\n    })\n  )",
      "description": "IDs of additional security groups to be added to VSI deployment secondary interfaces. A VSI interface can have a maximum of 5 security groups.",
      "default": [],
      "pos": {
        "filename": "variables.tf",
        "line": 333
      }
    },
    "secondary_subnets": {
      "name": "secondary_subnets",
      "type": "list(\n    object({\n      name = string\n      id   = string\n      zone = string\n      cidr = string\n    })\n  )",
      "description": "List of secondary network interfaces to add to vsi secondary subnets must be in the same zone as VSI. This is only recommended for use with a deployment of 1 VSI.",
      "default": [],
      "pos": {
        "filename": "variables.tf",
        "line": 314
      }
    },
    "secondary_use_vsi_security_group": {
      "name": "secondary_use_vsi_security_group",
      "type": "bool",
      "description": "Use the security group created by this module in the secondary interface",
      "default": false,
      "pos": {
        "filename": "variables.tf",
        "line": 327
      }
    },
    "security_group": {
      "name": "security_group",
      "type": "object({\n    name = string\n    rules = list(\n      object({\n        name      = string\n        direction = string\n        remote    = string\n        tcp = optional(\n          object({\n            port_max = number\n            port_min = number\n          })\n        )\n        udp = optional(\n          object({\n            port_max = number\n            port_min = number\n          })\n        )\n        icmp = optional(\n          object({\n            type = number\n            code = number\n          })\n        )\n      })\n    )\n  })",
      "description": "Security group created for VSI",
      "required": true,
      "pos": {
        "filename": "variables.tf",
        "line": 110
      }
    },
    "security_group_ids": {
      "name": "security_group_ids",
      "type": "list(string)",
      "description": "IDs of additional security groups to be added to VSI deployment primary interface. A VSI interface can have a maximum of 5 security groups.",
      "default": [],
      "pos": {
        "filename": "variables.tf",
        "line": 164
      }
    },
    "ssh_key_ids": {
      "name": "ssh_key_ids",
      "type": "list(string)",
      "description": "ssh key ids to use in creating vsi",
      "required": true,
      "source": [
        "ibm_is_instance.vsi.keys"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 62
      },
      "elem": {
        "type": "TypeString"
      }
    },
    "subnets": {
      "name": "subnets",
      "type": "list(\n    object({\n      name = string\n      id   = string\n      zone = string\n      cidr = string\n    })\n  )",
      "description": "A list of subnet IDs where VSI will be deployed",
      "required": true,
      "source": [
        "ibm_is_lb.lb.subnets"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 38
      }
    },
    "tags": {
      "name": "tags",
      "type": "list(string)",
      "description": "List of tags to apply to resources created by this module.",
      "default": [],
      "source": [
        "ibm_is_floating_ip.secondary_fip.tags",
        "ibm_is_floating_ip.vsi_fip.tags",
        "ibm_is_instance.vsi.tags",
        "ibm_is_lb.lb.tags",
        "ibm_is_volume.volume.tags"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 20
      },
      "min_length": 1,
      "max_length": 128,
      "matches": "^[A-Za-z0-9:_ .-]+$",
      "computed": true,
      "elem": {
        "type": "TypeString"
      }
    },
    "user_data": {
      "name": "user_data",
      "type": "string",
      "description": "User data to initialize VSI deployment",
      "required": true,
      "source": [
        "ibm_is_instance.vsi.user_data"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 77
      },
      "immutable": true
    },
    "vpc_id": {
      "name": "vpc_id",
      "type": "string",
      "description": "ID of VPC",
      "required": true,
      "source": [
        "data.ibm_is_vpcs.vpcs.depends_on",
        "ibm_is_instance.vsi.vpc",
        "module.security_group_rules.ibm_is_security_group.sg.vpc"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 33
      },
      "immutable": true,
      "computed": true
    },
    "vsi_per_subnet": {
      "name": "vsi_per_subnet",
      "type": "number",
      "description": "Number of VSI instances for each subnet",
      "required": true,
      "pos": {
        "filename": "variables.tf",
        "line": 72
      }
    }
  },
  "outputs": {
    "fip_list": {
      "name": "fip_list",
      "description": "A list of VSI with name, id, zone, and primary ipv4 address, and floating IP. This list only contains instances with a floating IP attached.",
      "pos": {
        "filename": "outputs.tf",
        "line": 33
      }
    },
    "ids": {
      "name": "ids",
      "description": "The IDs of the VSI",
      "pos": {
        "filename": "outputs.tf",
        "line": 5
      }
    },
    "lb_hostnames": {
      "name": "lb_hostnames",
      "description": "Hostnames for the Load Balancer created",
      "pos": {
        "filename": "outputs.tf",
        "line": 54
      }
    },
    "lb_security_groups": {
      "name": "lb_security_groups",
      "description": "Load Balancer security groups",
      "pos": {
        "filename": "outputs.tf",
        "line": 62
      }
    },
    "list": {
      "name": "list",
      "description": "A list of VSI with name, id, zone, and primary ipv4 address",
      "pos": {
        "filename": "outputs.tf",
        "line": 18
      }
    },
    "vsi_security_group": {
      "name": "vsi_security_group",
      "description": "Security group for the VSI",
      "pos": {
        "filename": "outputs.tf",
        "line": 13
      }
    }
  },
  "required_core": [
    "\u003e= 1.3.0"
  ],
  "required_providers": {
    "ibm": {
      "source": "IBM-Cloud/ibm",
      "version_constraints": [
        "\u003e= 1.51.0"
      ]
    }
  },
  "managed_resources": {
    "ibm_is_floating_ip.secondary_fip": {
      "mode": "managed",
      "type": "ibm_is_floating_ip",
      "name": "secondary_fip",
      "attributes": {
        "for_each": "secondary_floating_ips",
        "tags": "tags"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 127
      }
    },
    "ibm_is_floating_ip.vsi_fip": {
      "mode": "managed",
      "type": "ibm_is_floating_ip",
      "name": "vsi_fip",
      "attributes": {
        "for_each": "enable_floating_ip",
        "tags": "tags"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 120
      }
    },
    "ibm_is_instance.vsi": {
      "mode": "managed",
      "type": "ibm_is_instance",
      "name": "vsi",
      "attributes": {
        "image": "image_id",
        "keys": "ssh_key_ids",
        "profile": "machine_type",
        "resource_group": "resource_group_id",
        "tags": "tags",
        "user_data": "user_data",
        "volumes": "block_storage_volumes",
        "vpc": "vpc_id"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 67
      }
    },
    "ibm_is_lb.lb": {
      "mode": "managed",
      "type": "ibm_is_lb",
      "name": "lb",
      "attributes": {
        "name": "prefix",
        "resource_group": "resource_group_id",
        "subnets": "subnets",
        "tags": "tags"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "load_balancer.tf",
        "line": 12
      }
    },
    "ibm_is_lb_listener.listener": {
      "mode": "managed",
      "type": "ibm_is_lb_listener",
      "name": "listener",
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "load_balancer.tf",
        "line": 80
      }
    },
    "ibm_is_lb_pool.pool": {
      "mode": "managed",
      "type": "ibm_is_lb_pool",
      "name": "pool",
      "attributes": {
        "name": "prefix"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "load_balancer.tf",
        "line": 29
      }
    },
    "ibm_is_lb_pool_member.pool_members": {
      "mode": "managed",
      "type": "ibm_is_lb_pool_member",
      "name": "pool_members",
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "load_balancer.tf",
        "line": 64
      }
    },
    "ibm_is_volume.volume": {
      "mode": "managed",
      "type": "ibm_is_volume",
      "name": "volume",
      "attributes": {
        "tags": "tags"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "storage.tf",
        "line": 41
      }
    }
  },
  "data_resources": {
    "data.ibm_is_vpc.vpc": {
      "mode": "data",
      "type": "ibm_is_vpc",
      "name": "vpc",
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 54
      }
    },
    "data.ibm_is_vpcs.vpcs": {
      "mode": "data",
      "type": "ibm_is_vpcs",
      "name": "vpcs",
      "attributes": {
        "depends_on": "vpc_id"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 48
      }
    }
  },
  "module_calls": {
    "security_group_rules": {
      "name": "security_group_rules",
      "source": "git::https://github.com/terraform-ibm-modules/terraform-ibm-security-group.git?ref=v1.0.0",
      "attributes": {
        "add_ibm_cloud_internal_rules": "add_ibm_cloud_internal_rules",
        "resource_group": "resource_group_id",
        "vpc_id": "vpc_id"
      },
      "managed_resources": {
        "ibm_is_security_group.sg": {
          "mode": "managed",
          "type": "ibm_is_security_group",
          "name": "sg",
          "attributes": {
            "count": "existing_security_group_name",
            "name": "security_group_name",
            "resource_group": "resource_group",
            "vpc": "vpc_id"
          },
          "provider": {
            "name": "ibm"
          },
          "pos": {
            "filename": ".terraform/modules/security_group_rules/main.tf",
            "line": 7
          }
        },
        "ibm_is_security_group_rule.security_group_rule": {
          "mode": "managed",
          "type": "ibm_is_security_group_rule",
          "name": "security_group_rule",
          "attributes": {
            "group": "existing_security_group_name"
          },
          "provider": {
            "name": "ibm"
          },
          "pos": {
            "filename": ".terraform/modules/security_group_rules/main.tf",
            "line": 34
          }
        },
        "ibm_is_security_group_target.sg_target": {
          "mode": "managed",
          "type": "ibm_is_security_group_target",
          "name": "sg_target",
          "attributes": {
            "count": "target_ids",
            "security_group": "existing_security_group_name",
            "target": "target_ids"
          },
          "provider": {
            "name": "ibm"
          },
          "pos": {
            "filename": ".terraform/modules/security_group_rules/main.tf",
            "line": 24
          }
        }
      },
      "data_resources": {
        "data.ibm_is_security_group.existing_sg": {
          "mode": "data",
          "type": "ibm_is_security_group",
          "name": "existing_sg",
          "attributes": {
            "count": "existing_security_group_name",
            "name": "existing_security_group_name"
          },
          "provider": {
            "name": "ibm"
          },
          "pos": {
            "filename": ".terraform/modules/security_group_rules/main.tf",
            "line": 14
          }
        }
      },
      "outputs": {
        "security_group_id": {
          "name": "security_group_id",
          "description": "The ID of the security group where the rules are added",
          "pos": {
            "filename": ".terraform/modules/security_group_rules/outputs.tf",
            "line": 10
          }
        },
        "security_group_rule": {
          "name": "security_group_rule",
          "description": "Security group rules",
          "value": "ibm_is_security_group_rule.security_group_rule",
          "pos": {
            "filename": ".terraform/modules/security_group_rules/outputs.tf",
            "line": 15
          }
        },
        "security_target": {
          "name": "security_target",
          "description": "Resources added to the security group",
          "value": "ibm_is_security_group_target.sg_target",
          "pos": {
            "filename": ".terraform/modules/security_group_rules/outputs.tf",
            "line": 5
          }
        }
      },
      "pos": {
        "filename": "security_group.tf",
        "line": 29
      }
    }
  }
}
