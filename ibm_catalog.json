{
  "products": [
    {
      "name": "deploy-arch-ibm-slz-vsi",
      "label": "Landing zone for applications with virtual servers",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "virtualservers",
        "reference_architecture",
        "platform_engineering"
      ],
      "keywords": [
        "vpc",
        "slz",
        "IaC",
        "terraform",
        "virtualservers",
        "vsi",
        "servers",
        "solution",
        "infrastructure as code"
      ],
      "short_description": "Deploys secure Virtual Server Instances on IBM Cloud VPC with flexible configurations, QuickStart options for simplified setup, and integrated security and logging features",
      "long_description": "Landing zone for applications with virtual servers delivers fast-provisioned, high-performance compute with network isolation and built-in security. [VSIs](https://cloud.ibm.com/docs/vpc?topic=vpc-about-advanced-virtual-servers) can be deployed into new or existing Virtual Private Clouds (VPCs) with flexible configurations and integration to networking, storage, and security services. They support both x86 and s390x [profiles](https://cloud.ibm.com/docs/vpc?group=profiles) to match compute and memory needs. Designed for secure, compliant, and customizable application workloads, VSIs enable consistent, scalable deployments across multiple zones and subnets within an IBM Cloud VPC. \n\nLeverage [Terraform IBM Modules](https://github.com/terraform-ibm-modules) to shape and scale your solutions. You can integrate Terraform IBM Modules (TIM) to extend functionality and design a solution tailored to your environment and operations needs. These modules offer reusable, customizable elements that follow IBM Cloud's recommended practices. You can access the [source code and documentation](https://github.com/terraform-ibm-modules/terraform-ibm-landing-zone) and use it to extend your current architecture or create new solutions.",
      "offering_docs_url": "https://cloud.ibm.com/docs/secure-infrastructure-vpc?topic=secure-infrastructure-vpc-overview#overview-vsi",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-landing-zone-vsi/main/images/vsi-icon.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Configurable Compute, Networking, and Placement",
          "description": "Creates and configures one or more [IBM Cloud Virtual Server Instances (VSIs)](https://cloud.ibm.com/docs/vpc?topic=vpc-about-advanced-virtual-servers) into a fully configurable IBM Cloud VPC with multi-zone [subnets](https://cloud.ibm.com/docs/vpc?topic=vpc-about-subnets-vpc&interface=ui), and placement control. Supports quick start or advanced setups with customizable VSI [profiles](https://cloud.ibm.com/docs/vpc?group=profiles) and attachment to networking and security services."
        },
        {
          "title": "Resilient Traffic and Access Controls",
          "description": "Enables  Network (Layer 4) and Application (Layer 7) [Load Balancers](https://cloud.ibm.com/docs/vpc?topic=vpc-nlb-vs-elb) with health checks, while enforcing least-privilege access via [security groups](https://cloud.ibm.com/docs/vpc?group=security-groups) and managed [SSH keys](https://cloud.ibm.com/docs/vpc?topic=vpc-ssh-keys&interface=ui). Integrates [Context-Based Restrictions (CBR)](https://cloud.ibm.com/docs/vpc?topic=vpc-cbr&interface=ui) to limit service access to approved landing zone VPCs."
        },
        {
          "title": "Secure Storage and Key Management",
          "description": "Attaches high-performance [Block Storage volumes]( https://cloud.ibm.com/docs/vpc?topic=vpc-block_storage_about) with selectable profiles and capacity, with optional [Key Management Services](https://cloud.ibm.com/docs/vpc?topic=vpc-vpc-encryption-about&interface=ui) for encryption using new or existing keys."
        },
        {
          "title": "Secrets Management Integration",
          "description": "Optionally adds [Cloud automation for Secrets Manager](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-secrets-manager-6d6ebc76-7bbd-42f5-8bc7-78f4fabd5944-global) to manage SSH private keys and other secrets."
        },
        {
          "title": "Sets up logging for the Virtual Server Instance",
          "description": "Optionally, you can deploy Cloud automation for Cloud Logs to route, alert, and visualize platform logs that are generated by your Virtual Server Instance. [Learn more](https://cloud.ibm.com/docs/vpc?topic=vpc-logging)"
        },
        {
          "title": "Sets up monitoring operational metrics for the Virtual Server Instance",
          "description": "Optionally, you can deploy Cloud automation for Cloud Monitoring to measure how users and applications interact with your Virtual Server Instance. [Learn more](https://cloud.ibm.com/docs/vpc?topic=vpc-ibm-monitoring)"
        },
        {
          "title": "Sets up activity tracking for the Virtual Server Instance",
          "description": "Optionally, you can deploy Cloud automation for Activity Tracker Event Routing to route and securely store auditing events that are related to your Virtual Server Instance. [Learn more](https://cloud.ibm.com/docs/vpc?topic=vpc-at_events)"
        },
        {
          "title": "Composable and Extensible Architecture",
          "description": "This architecture illustrates how Terraform IBM Modules(TIM) can be integrated to deliver a complete solution on IBM Cloud. Each module is a reusable, and validated component for security, compliance, and operational IBM best practices. You can deploy this architecture as-is or configure it as code by leveraging the underlying modules to fit your specific requirements. Explore the [source code and documentation](https://github.com/terraform-ibm-modules/terraform-ibm-landing-zone) to adapt, extend, or create entirely new solutions using these building blocks."
        }
      ],
      "flavors": [
        {
          "label": "Quickstart - Basic and simple",
          "name": "vsi-quickstart",
          "short_description": "Ideal for users new to IBM Cloud or Virtual Server Instance who want to get started without configuring underlying infrastructure.",
          "index": 1,
          "install_type": "fullstack",
          "working_directory": "solutions/quickstart",
          "release_notes_url": "https://cloud.ibm.com/docs/secure-infrastructure-vpc?topic=secure-infrastructure-vpc-secure-infrastructure-vpc-relnotes",
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true,
              "default_value": "dev",
              "random_string": {
                "length": 4
              },
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "Prefix must begin with a lowercase letter and may contain only lowercase letters, digits, and hyphens '-'. It must not end with a hyphen('-'), and cannot contain consecutive hyphens ('--'). It should not exceed 16 characters",
                  "value": "^$|^__NULL__$|^[a-z](?!.*--)(?:[a-z0-9-]{0,14}[a-z0-9])?$"
                }
              ]
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "existing_vpc_crn",
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_vpc_crn' is not valid.",
                  "value": "^$|^__NULL__$|^crn:(.*:){3}is:(.*:){2}:vpc:[0-9a-z]{4}-[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                }
              ],
              "custom_config": {
                "type": "platform_resource",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "resourceType": "vpc",
                  "selection": "single_select",
                  "valueType": "crn"
                }
              }
            },
            {
              "key": "vsi_name"
            },
            {
              "key": "image_name",
              "required": true,
              "options": [
                {
                  "displayname": "Ubuntu 22",
                  "value": "ibm-ubuntu-22-04-5-minimal-amd64-6"
                },
                {
                  "displayname": "Ubuntu 24",
                  "value": "ibm-ubuntu-24-04-3-minimal-amd64-2"
                },
                {
                  "displayname": "Redhat 8",
                  "value": "ibm-redhat-8-10-minimal-amd64-7"
                },
                {
                  "displayname": "Redhat 9",
                  "value": "ibm-redhat-9-4-minimal-amd64-10"
                },
                {
                  "displayname": "Debian 12",
                  "value": "ibm-debian-12-11-minimal-amd64-1"
                },
                {
                  "displayname": "Debian 13",
                  "value": "ibm-debian-13-minimal-amd64-1"
                },
                {
                  "displayname": "Fedora",
                  "value": "ibm-fedora-coreos-42-stable-2"
                },
                {
                  "displayname": "CentOS 9",
                  "value": "ibm-centos-stream-9-amd64-12"
                },
                {
                  "displayname": "CentOS 10",
                  "value": "ibm-centos-stream-10-amd64-4"
                }
              ]
            },
            {
              "key": "size",
              "required": true,
              "options": [
                {
                  "displayname": "Mini",
                  "value": "mini"
                },
                {
                  "displayname": "Small",
                  "value": "small"
                },
                {
                  "displayname": "Medium",
                  "value": "medium"
                },
                {
                  "displayname": "Large",
                  "value": "large"
                }
              ]
            },
            {
              "key": "vpc_region",
              "required": true,
              "type": "string",
              "custom_config": {
                "config_constraints": {
                  "generationType": "2"
                },
                "grouping": "deployment",
                "original_grouping": "deployment",
                "type": "vpc_region"
              }
            },
            {
              "key": "existing_ssh_key_name"
            },
            {
              "key": "enable_floating_ip"
            },
            {
              "key": "user_data",
              "custom_config": {
                "type": "textarea",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            },
            {
              "key": "resource_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "provider_visibility",
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ],
              "hidden": true
            }
          ],
          "iam_permissions": [
            {
              "service_name": "is.vpc",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "Required for creating Virtual Server Instance and Virtual Private Cloud (VPC)."
            },
            {
              "service_name": "Resource group only",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "notes": "Viewer access is required in the resource group you want to provision in."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "A lightweight, experimental configuration for quickly provisioning Virtual Server Instance on IBM Cloud VPC. Not certified and not intended for production use."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Virtual Server Instance topology - Quickstart (Basic and simple)",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-landing-zone-vsi/main/reference-architectures/vsi-qs.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture supports deployment of a <b>Virtual Server Instance</b> within an IBM Cloud <b>Virtual Private Cloud (VPC)</b> environment.<br><br>The VPC is hosted within a resource group in a specific region. It includes a single-zone deployment with one subnet for network segmentation and connectivity of compute resources. A security group is also added to allow SSH access to Virtual Server Instance.<br><br>Users can select from predefined Virtual Server Instance sizes — <b>mini (default), small, medium, and large.</b> The chosen size determines the <b>machine type</b> of the Virtual Server Instance, <b>the number of virtual CPU</b>, <b>RAM capacity</b>, <b>Bandwidth</b> and <b>Instance Storage</b>. To get more information on this, refer [here](https://github.com/terraform-ibm-modules/terraform-ibm-landing-zone-vsi/blob/main/solutions/quickstart/DA_docs.md).<br><br>For external connectivity, the architecture supports optional assignment of a floating IP to the virtual server, allowing public network access as needed."
              }
            ]
          },
          "terraform_version": "1.12.2",
          "ignore_readme": true
        },
        {
          "label": "Standard - Integrated setup with configurable services",
          "name": "fully-configurable",
          "short_description": "Ideal for users who want flexibility with a reliable starting point.",
          "index": 2,
          "install_type": "fullstack",
          "working_directory": "solutions/fully-configurable",
          "release_notes_url": "https://cloud.ibm.com/docs/secure-infrastructure-vpc?topic=secure-infrastructure-vpc-secure-infrastructure-vpc-relnotes",
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true,
              "default_value": "dev",
              "random_string": {
                "length": 4
              },
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "Prefix must begin with a lowercase letter and may contain only lowercase letters, digits, and hyphens '-'. It must not end with a hyphen('-'), and cannot contain consecutive hyphens ('--'). It should not exceed 16 characters.",
                  "value": "^$|^__NULL__$|^[a-z](?!.*--)(?:[a-z0-9-]{0,14}[a-z0-9])?$"
                }
              ]
            },
            {
              "key": "region",
              "required": true,
              "type": "string",
              "custom_config": {
                "config_constraints": {
                  "generationType": "2"
                },
                "grouping": "deployment",
                "original_grouping": "deployment",
                "type": "vpc_region"
              },
              "description": "Region in which all the resources will be deployed. [Learn More](https://terraform-ibm-modules.github.io/documentation/#/region).",
              "virtual": true,
              "default_value": "us-south"
            },
            {
              "key": "image_id",
              "required": true
            },
            {
              "key": "machine_type",
              "required": true
            },
            {
              "key": "existing_vpc_crn",
              "required": true,
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_vpc_crn' is not valid.",
                  "value": "^crn:(.*:){3}is:(.*:){2}:vpc:[0-9a-z]{4}-[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                }
              ],
              "custom_config": {
                "type": "platform_resource",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "resourceType": "vpc",
                  "selection": "single_select",
                  "valueType": "crn"
                }
              }
            },
            {
              "key": "secrets_manager_service_plan",
              "required": true,
              "virtual": true,
              "type": "string",
              "options": [
                {
                  "displayname": "Standard",
                  "value": "standard"
                },
                {
                  "displayname": "Trial",
                  "value": "trial"
                }
              ],
              "default_value": "standard",
              "description": "The pricing plan to use when provisioning a new Secrets Manager instance. Possible values: `standard`, `trial`. You can create only one Trial instance of Secrets Manager per account. Before you can create a new Trial instance, you must delete the existing Trial instance and its reclamation. [Learn more](https://cloud.ibm.com/docs/secrets-manager?topic=secrets-manager-create-instance&interface=ui#upgrade-instance-standard)."
            },
            {
              "key": "enable_platform_metrics",
              "type": "boolean",
              "default_value": false,
              "hidden": true,
              "description": "When set to `true`, the IBM Cloud Monitoring instance will be configured to collect platform metrics from the provided region. ⚠️ You can configure 1 instance only of the IBM Cloud Monitoring service per region to collect platform metrics in that location. Check with the account or service administrator if another monitoring instance has already been configured. You may not have permissions to see all monitoring instances in the region. [Learn more](https://cloud.ibm.com/docs/monitoring?topic=monitoring-platform_metrics_enabling).",
              "required": true,
              "virtual": true,
              "options": [
                {
                  "displayname": "true",
                  "value": true
                },
                {
                  "displayname": "false",
                  "value": false
                }
              ]
            },
            {
              "key": "logs_routing_tenant_regions",
              "type": "array",
              "default_value": [],
              "description": "To manage platform logs that are generated by IBM Cloud services in a region of IBM Cloud, you must create a tenant in each region that you operate. Pass a list of regions to create a tenant in. [Learn more](https://cloud.ibm.com/docs/logs-router?topic=logs-router-about-platform-logs).",
              "hidden": true,
              "required": true,
              "custom_config": {
                "type": "array",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              },
              "virtual": true
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "existing_subnet_id",
              "custom_config": {
                "type": "platform_resource",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "resourceType": "subnet",
                  "selection": "single_select",
                  "valueType": "id"
                },
                "associations": {
                  "parameters": [
                    {
                      "name": "region",
                      "optionsRefresh": true
                    }
                  ]
                }
              }
            },
            {
              "key": "vsi_name"
            },
            {
              "key": "vsi_resource_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "vsi_access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "auto_generate_ssh_key"
            },
            {
              "key": "ssh_public_keys",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "existing_ssh_key_ids",
              "custom_config": {
                "type": "vpc_ssh_key",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "selection": "multi_select"
                }
              }
            },
            {
              "key": "existing_secrets_manager_instance_crn",
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_secrets_manager_instance_crn' is not valid.",
                  "value": "^__NULL__$|^crn:(.*:){3}secrets-manager:(.*:){2}[0-9a-fA-F]{8}(?:-[0-9a-fA-F]{4}){3}-[0-9a-fA-F]{12}::$"
                }
              ],
              "custom_config": {
                "type": "platform_resource",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "resourceType": "secrets-manager",
                  "selection": "single_select",
                  "valueType": "crn"
                }
              }
            },
            {
              "key": "existing_secrets_manager_endpoint_type",
              "hidden": true
            },
            {
              "key": "ssh_key_secret_group_name"
            },
            {
              "key": "ssh_key_secret_name"
            },
            {
              "key": "allow_ip_spoofing"
            },
            {
              "key": "block_storage_volumes",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "ibmcloud_kms_api_key",
              "hidden": true
            },
            {
              "key": "kms_encryption_enabled_boot_volume"
            },
            {
              "key": "existing_kms_instance_crn",
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_kms_instance_crn' is not valid.",
                  "value": "^__NULL__$|^crn:(.*:){3}(kms|hs-crypto):(.*:){2}[0-9a-fA-F]{8}(?:-[0-9a-fA-F]{4}){3}-[0-9a-fA-F]{12}::$"
                }
              ]
            },
            {
              "key": "skip_block_storage_kms_iam_auth_policy",
              "hidden": true
            },
            {
              "key": "kms_endpoint_type",
              "options": [
                {
                  "displayname": "Public",
                  "value": "public"
                },
                {
                  "displayname": "Private",
                  "value": "private"
                }
              ],
              "hidden": true
            },
            {
              "key": "boot_volume_key_ring_name",
              "hidden": true
            },
            {
              "key": "existing_boot_volume_kms_key_crn",
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_boot_volume_kms_key_crn' is not valid.",
                  "value": "^__NULL__$|^crn:(.*:){3}(kms|hs-crypto):(.*:){2}[0-9a-fA-F]{8}(?:-[0-9a-fA-F]{4}){3}-[0-9a-fA-F]{12}:key:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                }
              ]
            },
            {
              "key": "force_delete_kms_key",
              "hidden": true
            },
            {
              "key": "use_boot_volume_key_as_default",
              "hidden": true
            },
            {
              "key": "security_group",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "security_group_ids",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "boot_volume_key_name",
              "hidden": true
            },
            {
              "key": "boot_volume_snapshot_id"
            },
            {
              "key": "dedicated_host_id"
            },
            {
              "key": "enable_floating_ip"
            },
            {
              "key": "load_balancers",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "manage_reserved_ips"
            },
            {
              "key": "placement_group_id"
            },
            {
              "key": "primary_virtual_network_interface_additional_ip_count"
            },
            {
              "key": "secondary_allow_ip_spoofing"
            },
            {
              "key": "secondary_floating_ips",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "secondary_security_groups",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "existing_secondary_subnet_id",
              "custom_config": {
                "type": "platform_resource",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "resourceType": "subnet",
                  "selection": "single_select",
                  "valueType": "id"
                },
                "associations": {
                  "parameters": [
                    {
                      "name": "region",
                      "optionsRefresh": true
                    }
                  ]
                }
              }
            },
            {
              "key": "secondary_use_vsi_security_group"
            },
            {
              "key": "snapshot_consistency_group_id"
            },
            {
              "key": "boot_volume_size"
            },
            {
              "key": "use_static_boot_volume_name",
              "hidden": true
            },
            {
              "key": "user_data",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "provider_visibility",
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ],
              "hidden": true
            },
            {
              "key": "install_logging_agent"
            },
            {
              "key": "logging_target_host"
            },
            {
              "key": "logging_target_port"
            },
            {
              "key": "logging_agent_version"
            },
            {
              "key": "logging_application_name",
              "hidden": true
            },
            {
              "key": "logging_secure_access_enabled",
              "hidden": true
            },
            {
              "key": "logging_subsystem_name",
              "hidden": true
            },
            {
              "key": "logging_target_path"
            },
            {
              "key": "logging_auth_mode",
              "options": [
                {
                  "displayname": "IAM API Key",
                  "value": "IAMAPIKey"
                },
                {
                  "displayname": "VSI Trusted Profile",
                  "value": "VSITrustedProfile"
                }
              ]
            },
            {
              "key": "logging_api_key"
            },
            {
              "key": "logging_trusted_profile_id"
            },
            {
              "key": "logging_use_private_endpoint"
            },
            {
              "key": "install_monitoring_agent"
            },
            {
              "key": "monitoring_access_key"
            },
            {
              "key": "monitoring_agent_version"
            },
            {
              "key": "monitoring_collector_endpoint"
            },
            {
              "key": "monitoring_collector_port"
            },
            {
              "key": "monitoring_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            }
          ],
          "iam_permissions": [
            {
              "service_name": "is",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "Required for creating Virtual Server Instance and Virtual Private Cloud(VPC)."
            },
            {
              "service_name": "Resource group only",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "notes": "Viewer access is required in the resource group you want to provision in."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "service_name": "kms",
              "notes": "[Optional] Required if Key Protect is used for encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "All Identity and Access enabled services",
              "notes": "[Optional] Required to to create trusted profile for App Configuration aggregator which is used for compliance scanning."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required if Hyper Protect Crypto Service is used for encryption."
            },
            {
              "service_name": "sysdig-monitor",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "[Optional] Required to create an instance of Cloud Monitoring."
            },
            {
              "service_name": "logs",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "[Optional] Required to create an instance of Cloud Logs."
            },
            {
              "service_name": "atracker",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Writer",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "[Optional] Required if you are configuring Activity Tracker Event Routing."
            },
            {
              "service_name": "secrets-manager",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator",
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "notes": "[Optional] Required when enabling the Secrets Manager integration."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Offers full control over architecture parameters, with well-chosen defaults that enables functional Virtual Server Instances on IBM Cloud VPC and seamless integration with IBM Cloud services without requiring manual adjustments."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Virtual Server Instance topology - Standard (Integrated setup with configurable services)",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-landing-zone-vsi/main/reference-architectures/vsi.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture supports deployment of a <b>Virtual Server Instance</b> within an IBM Cloud <b>Virtual Private Cloud (VPC)</b> environment.<br><br>The VPC is hosted within a designated resource group in a specific region. You can either provision a new VPC or use an existing one, depending on your workload requirements. The VPC includes a subnet for network segmentation and connectivity of compute resources.<br><br>At the core of this setup is the <b>Virtual Server Instance on VPC</b>, which can be optionally associated with block volumes for additional data storage. These block volumes can be encrypted using key management services (KMS), where a boot-volume key is managed under a defined key ring.<br><br>To enhance secure access and centralized credential management, <b>Secrets Manager</b> can be integrated. This enables storage and retrieval of sensitive information such as ssh private keys, helping ensure secure and auditable server access.<br><br>For external connectivity, the architecture supports optional assignment of a floating ip to the virtual server, allowing public network access as needed.<br><br>A security group is defined to control inbound and outbound traffic to the virtual server. It includes a load balancer setup, consisting of a <b>Load Balancer Listener</b>, <b>Load Balancer</b>, and <b>Load Balancer Pool</b> to distribute traffic efficiently across backend resources.<br><br>Observability capabilities can be optionally enabled to monitor and manage the health and performance of deployed resources. This includes <b>Cloud Monitoring</b> for metrics and <b>Cloud Logs</b> for log aggregation and analysis.<br><br>This architecture provides a scalable, secure, and flexible foundation for deploying applications on IBM Cloud, integrating optional services such as encryption, observability, and secure key management for enterprise-grade workloads."
              }
            ]
          },
          "dependencies": [
            {
              "name": "deploy-arch-ibm-slz-vpc",
              "description": " Defines the VPC instance and subnets where Virtual Server Instance will be created. ",
              "id": "9fc0fa64-27af-4fed-9dce-47b3640ba739-global",
              "version": "v8.8.3",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "1082e7d2-5e2f-0a11-a3bc-f88a8e1931fc",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                },
                {
                  "dependency_output": "vpc_crn",
                  "version_input": "existing_vpc_crn"
                }
              ]
            },
            {
              "name": "deploy-arch-ibm-kms",
              "description": "Enable Cloud Automation for Key Protect when you want services to use your own managed encryption keys. If disabled, it will fall back on IBM Cloud's default service-managed encryption. ",
              "id": "2cad4789-fa90-4886-9c9e-857081c273ee-global",
              "version": "v5.4.8",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "kms_instance_crn",
                  "version_input": "existing_kms_instance_crn"
                },
                {
                  "version_input": "kms_encryption_enabled_boot_volume",
                  "value": true
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                }
              ]
            },
            {
              "name": "deploy-arch-ibm-cloud-monitoring",
              "description": "Configure IBM Cloud Monitoring to collect the platform metrics.",
              "flavors": [
                "fully-configurable"
              ],
              "id": "73debdbf-894f-4c14-81c7-5ece3a70b67d-global",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "input_mapping": [
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                },
                {
                  "dependency_input": "enable_platform_metrics",
                  "version_input": "enable_platform_metrics",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": true,
              "version": "v1.10.6"
            },
            {
              "name": "deploy-arch-ibm-cloud-logs",
              "description": "Configure IBM Cloud Logs to analyse the platform logs.",
              "flavors": [
                "fully-configurable"
              ],
              "id": "63d8ae58-fbf3-41ce-b844-0fb5b85882ab-global",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "input_mapping": [
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                },
                {
                  "dependency_input": "logs_routing_tenant_regions",
                  "version_input": "logs_routing_tenant_regions",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": true,
              "version": "v1.9.10"
            },
            {
              "name": "deploy-arch-ibm-activity-tracker",
              "description": "Configure Activity Tracker Event Routing to route the auditing events.",
              "flavors": [
                "fully-configurable"
              ],
              "id": "918453c3-4f97-4583-8c4a-83ef12fc7916-global",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "input_mapping": [
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": true,
              "version": "v1.4.11"
            },
            {
              "name": "deploy-arch-ibm-scc-workload-protection",
              "description": "Configure an IBM Cloud Security and Compliance Center Workload Protection instance to help you manage security and compliance for your organization.",
              "flavors": [
                "fully-configurable"
              ],
              "id": "4322cf44-2289-49aa-a719-dd79e39b14dc-global",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "input_mapping": [
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": true,
              "version": "v1.15.3"
            },
            {
              "name": "deploy-arch-ibm-secrets-manager",
              "description": "Configure a Secrets Manager instance to manage the ssh private key for the virtual server instance.",
              "id": "6d6ebc76-7bbd-42f5-8bc7-78f4fabd5944-global",
              "version": "v2.11.6",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                },
                {
                  "dependency_input": "service_plan",
                  "version_input": "secrets_manager_service_plan",
                  "reference_version": true
                },
                {
                  "dependency_output": "secrets_manager_crn",
                  "version_input": "existing_secrets_manager_instance_crn"
                }
              ]
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.12.2",
          "ignore_readme": true
        }
      ]
    }
  ]
}
