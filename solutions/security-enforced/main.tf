module "vsi" {
  source                                                   = "../fully-configurable"
  ibmcloud_api_key = var.ibmcloud_api_key
  existing_resource_group_name = var.existing_resource_group_name
  provider_visibility = "private"
  prefix = var.prefix 
  vsi_resource_tags = var.vsi_resource_tags
  vsi_access_tags = var.vsi_access_tags
  existing_vpc_crn = var.existing_vpc_crn
  existing_subnet_id = var.existing_subnet_id
  vsi_name = var.vsi_name
  image_id = var.image_id
  ssh_public_keys = var.ssh_public_keys
  existing_ssh_key_ids = var.existing_ssh_key_ids
  auto_generate_ssh_key = var.auto_generate_ssh_key
  machine_type = var.machine_type
  boot_volume_size = var.boot_volume_size
  user_data = var.user_data
  use_boot_volume_key_as_default = false 
  kms_encryption_enabled_boot_volume = true
  existing_boot_volume_kms_key_crn = var.existing_boot_volume_kms_key_crn 
  existing_kms_instance_crn = var.existing_kms_instance_crn 
  kms_endpoint_type = "private"
  force_delete_kms_key = var.force_delete_kms_key 
  skip_block_storage_kms_iam_auth_policy = var.skip_block_storage_kms_iam_auth_policy 
  boot_volume_key_ring_name = var.boot_volume_key_ring_name 
  boot_volume_key_name = var.boot_volume_key_name 
  ibmcloud_kms_api_key = var.ibmcloud_kms_api_key 
  manage_reserved_ips = var.manage_reserved_ips 
  primary_virtual_network_interface_additional_ip_count = var.primary_virtual_network_interface_additional_ip_count
  use_static_boot_volume_name = var.use_static_boot_volume_name 
  enable_floating_ip = var.enable_floating_ip 
  allow_ip_spoofing = var.allow_ip_spoofing
  placement_group_id = var.placement_group_id 
  security_group = var.security_group 
  security_group_ids = var.security_group_ids 
  block_storage_volumes = var.block_storage_volumes 
  load_balancers = var.load_balancers 
  existing_secondary_subnet_id = var.existing_secondary_subnet_id 
  secondary_use_vsi_security_group = var.secondary_use_vsi_security_group 
  secondary_security_groups = var.secondary_security_groups 
  secondary_floating_ips = var.secondary_floating_ips 
  secondary_allow_ip_spoofing = var.secondary_allow_ip_spoofing 
  boot_volume_snapshot_id = var.boot_volume_snapshot_id
  snapshot_consistency_group_id = var.snapshot_consistency_group_id
  dedicated_host_id = var.dedicated_host_id
  existing_secrets_manager_instance_crn = var.existing_secrets_manager_instance_crn
  existing_secrets_manager_endpoint_type = "private"
  ssh_key_secret_group_name = var.ssh_key_secret_group_name 
  ssh_key_secret_name = var.ssh_key_secret_name 
  install_logging_agent = var.install_logging_agent 
  logging_target_host = var.logging_target_host 
  logging_target_port = var.logging_target_port 
  logging_target_path = var.logging_target_path 
  logging_auth_mode = var.logging_auth_mode 
  logging_api_key = var.logging_api_key 
  logging_trusted_profile_id = var.logging_trusted_profile_id 
  logging_use_private_endpoint = var.logging_use_private_endpoint 
  install_monitoring_agent = var.install_monitoring_agent 
  monitoring_access_key = var.monitoring_access_key 
  monitoring_collector_endpoint = var.monitoring_collector_endpoint 
  monitoring_collector_port = var.monitoring_collector_port 
  monitoring_tags = var.monitoring_tags
}